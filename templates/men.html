{% extends 'base.html' %}
{% load static %}

{% block title %}Men{% endblock %}

{% block content %}
    <div class="breadcrumbs">
        <div class="container">
            <div class="row">
                <div class="col">
                    <p class="bread"><span><a href="{% url 'index' %}">Home</a></span> / <span>Men</span></p>
                </div>
            </div>
        </div>
    </div>

    <div class="breadcrumbs-two">
        <div class="container">
            <div class="row">
                <div class="col">
                    <div>
                        <h2>Men's</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="colorlib-product">
        <div class="container">
            <div class="row">
                <!-- FILTERS COLUMN -->
                <div class="col-lg-3 col-xl-3">
                    <form method="GET" action="{% url 'men' %}">
                        <div class="side border mb-1">
                            <h3>Size/Width</h3>
                            <div class="block-26 mb-2">
                                <h4>Size</h4>
                                <input type="text" name="size" class="form-control" placeholder="Enter size" value="{{ current_size|default:'' }}">
                            </div>
                            <div class="block-26">
                                <h4>Width</h4>
                                <select name="width" class="form-control">
                                    <option value="">All Widths</option>
                                    <option value="S" {% if current_width == 'S' %}selected{% endif %}>Standard</option>
                                    <option value="W" {% if current_width == 'W' %}selected{% endif %}>Wide</option>
                                </select>
                            </div>
                        </div>

                        <div class="side border mb-1">
                            <h3>Style</h3>
                            <select name="style" class="form-control">
                                <option value="">All Styles</option>
                                <option value="SLIP" {% if current_style == 'SLIP' %}selected{% endif %}>Slip Ons</option>
                                <option value="BOOT" {% if current_style == 'BOOT' %}selected{% endif %}>Boots</option>
                                <option value="SAND" {% if current_style == 'SAND' %}selected{% endif %}>Sandals</option>
                                <option value="LACE" {% if current_style == 'LACE' %}selected{% endif %}>Lace Ups</option>
                                <option value="OXFO" {% if current_style == 'OXFO' %}selected{% endif %}>Oxfords</option>
                            </select>
                        </div>

                        <div class="side border mb-1">
                            <h3>Colors</h3>
                            <input type="text" name="color" class="form-control" placeholder="Enter color" value="{{ current_color|default:'' }}">
                        </div>

                        <div class="side border mb-1">
                            <h3>Brand</h3>
                            <select name="brand" class="form-control">
                                <option value="">All Brands</option>
                                {% for value, name in brand_choices %}
                                    <option value="{{ value }}" {% if current_brand == value %}selected{% endif %}>{{ name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="side border mb-1">
                            <h3>Material</h3>
                            <select name="material" class="form-control">
                                <option value="">All Materials</option>
                                {% for value, name in material_choices %}
                                    <option value="{{ value }}" {% if current_material == value %}selected{% endif %}>{{ name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="side border mb-1">
                            <h3>Technologies</h3>
                            <input type="text" name="technology" class="form-control" placeholder="Enter technology" value="{{ current_technology|default:'' }}">
                        </div>

                        <div class="mb-3">
                            <button type="submit" class="btn btn-primary btn-block">Apply Filters</button>
                            <a href="{% url 'men' %}" class="btn btn-secondary btn-block">Reset Filters</a>
                        </div>
                    </form>
                </div>

                <!-- PRODUCTS COLUMN -->
                <div class="col-lg-9 col-xl-9">
                    <form method="post" action="{% url 'add_to_cart' %}" id="cart-form">
                        {% csrf_token %}
                        <div class="row row-pb-md" id="product-container">
                            {% for product in products %}
                                <div class="col-lg-3 mb-4 text-center">
                                    <div class="product-entry border product-card" data-product-id="{{ product.id }}">
                                        <a href="{% url 'product_detail' %}?product_id={{ product.id }}" class="btn btn-info btn-sm mb-2">Info</a>
                                        <div class="product-selector">
                                            <label for="product-{{ product.id }}">
                                                <div class="prod-img">
                                                    <img src="{{ product.image.url }}" class="img-fluid" alt="{{ product.name }}">
                                                </div>
                                                <div class="desc">
                                                    <h2>{{ product.name }}</h2>
                                                    <span class="price">${{ product.price }}</span>
                                                </div>
                                            </label>
                                            <!-- Checkbox for selecting product -->
<input type="checkbox" id="product-{{ product.id }}" name="products" value="{{ product.id }}" style="display:none;">
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        <div class="row">
                            <div class="col-12 text-right">
                                <button type="submit" class="btn btn-primary" id="add-to-cart-btn">
                                    <i class="icon-shopping-cart"></i> Add to Cart (<span id="selected-count">0</span>)
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="colorlib-partner">
        <div class="container">
            <div class="row">
                <div class="col-sm-8 offset-sm-2 text-center colorlib-heading colorlib-heading-sm">
                    <h2>Trusted Partners</h2>
                </div>
            </div>
            <div class="row">
                <div class="col partner-col text-center">
                    <img src="{% static 'images/brand-1.jpg' %}" class="img-fluid" alt="Brand 1">
                </div>
                <div class="col partner-col text-center">
                    <img src="{% static 'images/brand-2.jpg' %}" class="img-fluid" alt="Brand 2">
                </div>
                <div class="col partner-col text-center">
                    <img src="{% static 'images/brand-3.jpg' %}" class="img-fluid" alt="Brand 3">
                </div>
                <div class="col partner-col text-center">
                    <img src="{% static 'images/brand-4.jpg' %}" class="img-fluid" alt="Brand 4">
                </div>
                <div class="col partner-col text-center">
                    <img src="{% static 'images/brand-5.jpg' %}" class="img-fluid" alt="Brand 5">
                </div>
            </div>
        </div>
    </div>
{% endblock %}
